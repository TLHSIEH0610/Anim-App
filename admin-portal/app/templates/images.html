{% extends "base.html" %}

{% block content %}
<h2 class="mdc-typography--headline5">Images for Book {{ book_id }}</h2>

<h3 class="mdc-typography--headline6">Original Uploads</h3>
<div class="aa-grid aa-grid--sm">
  {% for image in original_images %}
  <div class="mdc-card aa-thumb">
    {% if image.data_uri %}
      <img src="{{ image.data_uri }}" alt="original">
    {% elif image.path %}
      <img src="/files-proxy?path={{ image.path | urlencode }}" alt="original">
    {% endif %}
    <code>{{ image.path }}</code>
  </div>
  {% endfor %}
  {% if not original_images %}
    <p class="mdc-typography--body2">No original uploads.</p>
  {% endif %}
  </div>

<h3 class="mdc-typography--headline6" style="margin-top:2rem;">Generated Pages</h3>
<div class="aa-grid aa-grid--sm">
  {% for page in page_images %}
  <div class="mdc-card aa-thumb">
    {% if page.data_uri %}
      <img src="{{ page.data_uri }}" alt="page">
    {% elif page.path %}
      <img src="/files-proxy?path={{ page.path | urlencode }}" alt="page">
    {% endif %}
    <h3>Page {{ page.page_number }}</h3>
    <h4>{{ page.status }}</h4>
    <code>{{ page.path }}</code>
  </div>
  {% endfor %}
  {% if not page_images %}
    <p class="mdc-typography--body2">No generated pages.</p>
  {% endif %}
</div>

{% if control_images %}
<h3 class="mdc-typography--headline6" style="margin-top:2rem;">ControlNet Inputs</h3>
<div class="aa-grid aa-grid--sm">
  {% for item in control_images %}
  <div class="mdc-card aa-thumb">
    {% if item.data_uri %}
      <img src="{{ item.data_uri }}" alt="control">
    {% elif item.path %}
      <img src="/files-proxy?path={{ item.path | urlencode }}" alt="control">
    {% endif %}
    <h3>Page {{ item.page_number }}</h3>
    <code>{{ item.path }}</code>
  </div>
  {% endfor %}
</div>
{% endif %}

<a href="/dashboard" class="mdc-button" style="margin-top:2rem;">Back to dashboard</a>
{% endblock %}
